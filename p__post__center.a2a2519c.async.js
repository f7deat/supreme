(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[992],{88890:function(xe,R,t){"use strict";t.r(R),t.d(R,{default:function(){return me}});var je=t(58024),W=t(39144),Ze=t(13254),X=t(14277),Ce=t(20136),Y=t(55241),Se=t(57663),L=t(71577),Ee=t(47673),j=t(4107),Te=t(34792),$=t(48086),w=t(3182),ye=t(12968),k=t(62462),d=t(2824),q=t(94043),z=t.n(q),_=t(5966),c=t(952),M=t(64317),ee=t(85589),H=t.n(ee),r=t(67294),D=t(36571),te=t(51742),ne=t(63258),ae=t(95357),se=t(26667),le=t(70844),pe=t(22385),re=t(69713),Ie=t(71153),Q=t(60331),J=t(86582),ie=t(49101),e=t(85893),ue=function(v){var o=v.tags,h=v.setTags,T=(0,r.useState)(""),Z=(0,d.Z)(T,2),m=Z[0],g=Z[1],y=(0,r.useState)(!1),f=(0,d.Z)(y,2),b=f[0],p=f[1],B=(0,r.useState)(""),I=(0,d.Z)(B,2),x=I[0],N=I[1],A=(0,r.useState)(-1),C=(0,d.Z)(A,2),S=C[0],G=C[1],E=(0,r.useRef)(),O=function(a){var V=o.filter(function(F){return F!==a});h(V)},u=function(){var a;p(!0),(a=E.current)===null||a===void 0||a.focus()},i=function(a){g(a.target.value)},s=function(){var a=o;m&&o.indexOf(m)===-1&&(a=[].concat((0,J.Z)(o),[m])),g(""),p(!1),h(a)},l=function(a){N(a.target.value)},P=function(){var a=(0,J.Z)(o);h(a),a[S]=x,G(-1),N("")};return(0,e.jsxs)(e.Fragment,{children:[o.map(function(n,a){if(S===a)return(0,e.jsx)(j.Z,{ref:E,size:"small",className:"tag-input",value:x,onChange:l,onBlur:P,onPressEnter:P},n);var V=n.length>20,F=(0,e.jsx)(Q.Z,{closable:a!==0,onClose:function(){return O(n)},children:(0,e.jsx)("span",{onDoubleClick:function(ge){if(a!==0){var K;(K=E.current)===null||K===void 0||K.focus(),ge.preventDefault()}},children:V?"".concat(n.slice(0,20),"..."):n})},n);return V?(0,e.jsx)(re.Z,{title:n,children:F},n):F}),b&&(0,e.jsx)(j.Z,{ref:E,type:"text",className:"w-20",size:"small",value:m,onChange:i,onBlur:s,onPressEnter:s}),!b&&(0,e.jsxs)(Q.Z,{className:"site-tag-plus",onClick:u,children:[(0,e.jsx)(ie.Z,{})," New Tag"]})]})},oe=ue,de=t(21010),ve=t(5977),he=function(v){var o=(0,r.useState)(),h=(0,d.Z)(o,2),T=h[0],Z=h[1],m=(0,r.useState)(""),g=(0,d.Z)(m,2),y=g[0],f=g[1],b=(0,r.useState)(!1),p=(0,d.Z)(b,2),B=p[0],I=p[1],x=(0,r.useRef)(),N=(0,r.useState)([]),A=(0,d.Z)(N,2),C=A[0],S=A[1];(0,r.useEffect)(function(){(0,te.KQ)().then(function(u){Z(u.map(function(i){return{value:i.id,label:i.name}}))})},[]),(0,r.useEffect)(function(){if(v.id)(0,D.xl)(v.id).then(function(i){var s,l=i.post,P=i.categories;f(l.thumbnail),l.tags&&S(l.tags.split(",")),(s=x.current)===null||s===void 0||s.setFields([{name:"id",value:l.id},{name:"title",value:l.title},{name:"url",value:l.url},{name:"description",value:l.description},{name:"thumbnail",value:l.thumbnail},{name:"content",value:H().createEditorState(l.content)},{name:"categories",value:P},{name:"status",value:l.status}])});else{var u;(u=x.current)===null||u===void 0||u.resetFields(),S([]),f("")}},[v.id]);var G=(0,e.jsx)(k.Z,{src:y,width:200,height:150}),E=function(){var u=(0,w.Z)(z().mark(function i(s){var l;return z().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s.content=s.content.toHTML(),C?s.tags=C.join(","):s.tags="",!v.id){n.next=8;break}return n.next=5,(0,D.CP)(s);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,(0,D.q2)(s);case 10:n.t0=n.sent;case 11:l=n.t0,l.succeeded?de.m8.push("/blog/post"):$.default.error(l.message);case 13:case"end":return n.stop()}},i)}));return function(s){return u.apply(this,arguments)}}(),O=function(i){var s;f(i),(s=x.current)===null||s===void 0||s.setFieldsValue({thumbnail:i})};return(0,e.jsxs)(c.ZP,{onFinish:E,formRef:x,children:[(0,e.jsx)(c.ZP.Item,{name:"id",hidden:!0,children:(0,e.jsx)(j.Z,{})}),(0,e.jsx)(_.Z,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0}]}),(0,e.jsx)(c.ZP.Item,{name:"url",label:"\u0110\u01B0\u1EDDng d\u1EABn",children:(0,e.jsx)(j.Z,{})}),(0,e.jsx)(c.ZP.Item,{name:"description",label:"M\xF4 t\u1EA3",children:(0,e.jsx)(j.Z.TextArea,{})}),(0,e.jsx)(c.ZP.Item,{name:"content",label:"N\u1ED9i dung",rules:[{required:!0}],children:(0,e.jsx)(H(),{language:"en",style:{border:"1px solid #d1d1d1"}})}),(0,e.jsx)("div",{className:"mb-2",children:"\u1EA2nh \u0111\u1EA1i di\u1EC7n"}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(c.ZP.Item,{name:"thumbnail",children:(0,e.jsx)(j.Z,{})})}),(0,e.jsx)(L.Z,{type:"primary",icon:(0,e.jsx)(ne.Z,{}),onClick:function(){return I(!0)},children:"Explorer"}),(0,e.jsx)(Y.Z,{content:G,children:(0,e.jsx)(L.Z,{icon:(0,e.jsx)(ae.Z,{}),children:"Preview"})})]}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(c.ZP.Item,{name:"categories",label:"Danh m\u1EE5c",children:(0,e.jsx)(M.Z,{fieldProps:{mode:"multiple"},options:T})})}),(0,e.jsx)(c.ZP.Item,{name:"status",label:"Tr\u1EA1ng th\xE1i",initialValue:1,children:(0,e.jsx)(M.Z,{allowClear:!1,options:[{value:0,label:"Draft"},{value:1,label:"Active"}]})})]}),(0,e.jsx)("div",{className:"mb-2",children:"Tags"}),(0,e.jsx)("div",{className:"mb-4",children:(0,e.jsx)(oe,{tags:C,setTags:S})}),(0,e.jsx)(se.Z,{visible:B,onVisibleChange:I,onSelect:O})]})},ce=function(){var v=(0,ve.UO)(),o=(0,r.useState)(""),h=(0,d.Z)(o,2),T=h[0],Z=h[1],m=function(f){Z(f)},g=function(){return T==="setting"?(0,e.jsx)(X.Z,{}):(0,e.jsx)(he,{id:v.id})};return(0,e.jsx)(le.ZP,{title:"Start writing",onTabChange:m,tabList:[{tab:"General",key:"general"},{tab:"Setting",key:"setting"}],children:(0,e.jsx)(W.Z,{children:g()})})},me=ce}}]);
