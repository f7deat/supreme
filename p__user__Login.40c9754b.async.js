(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5966:function(K,w,e){"use strict";var Y=e(22122),I=e(81253),J=e(67294),R=e(80597),te=["fieldProps","proFieldProps"],A=["fieldProps","proFieldProps"],M="text",D=function(T){var m=T.fieldProps,c=T.proFieldProps,t=(0,I.Z)(T,te);return J.createElement(R.Z,(0,Y.Z)({mode:"edit",valueType:M,fieldProps:m,filedConfig:{valueType:M},proFieldProps:c},t))},G=function(T){var m=T.fieldProps,c=T.proFieldProps,t=(0,I.Z)(T,A);return J.createElement(R.Z,(0,Y.Z)({mode:"edit",valueType:"password",fieldProps:m,proFieldProps:c,filedConfig:{valueType:M}},t))},U=D;U.Password=G,U.displayName="ProFormComponent",w.Z=U},34687:function(K){K.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},14430:function(K,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Qe}});var Y=e(18106),I=e(51752),J=e(57663),R=e(71577),te=e(34792),A=e(48086),M=e(11849),D=e(3182),G=e(2824),U=e(17462),Q=e(76772),T=e(94043),m=e.n(T),c=e(28991),t=e(67294),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},ge=fe,W=e(27029),re=function(s,i){return t.createElement(W.Z,(0,c.Z)((0,c.Z)({},s),{},{ref:i,icon:ge}))};re.displayName="FacebookOutlined";var me=t.forwardRef(re),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"},pe=ve,ne=function(s,i){return t.createElement(W.Z,(0,c.Z)((0,c.Z)({},s),{},{ref:i,icon:pe}))};ne.displayName="TwitterOutlined";var he=t.forwardRef(ne),Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Pe=Fe,se=function(s,i){return t.createElement(W.Z,(0,c.Z)((0,c.Z)({},s),{},{ref:i,icon:Pe}))};se.displayName="LockOutlined";var le=t.forwardRef(se),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},Ze=xe,ie=function(s,i){return t.createElement(W.Z,(0,c.Z)((0,c.Z)({},s),{},{ref:i,icon:Ze}))};ie.displayName="MobileOutlined";var Me=t.forwardRef(ie),ye=e(78874),Ce=e(89366),V=e(22122),Xe=e(84305),Ee=e(39559),X=e(81253),Te=e(5894),je=e(94237),qe=e(32384),Oe=["logo","message","title","subTitle","actions","children"];function be(r){var s=r.logo,i=r.message,v=r.title,P=r.subTitle,O=r.actions,b=r.children,C=(0,X.Z)(r,Oe),L=(0,je.YB)(),B=(0,c.Z)({searchConfig:{submitText:L.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(H,N){return N.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},C.submitter),S=(0,t.useContext)(Ee.ZP.ConfigContext),z=S.getPrefixCls("pro-form-login"),l=function(H){return"".concat(z,"-").concat(H)},j=(0,t.useMemo)(function(){return s?typeof s=="string"?t.createElement("img",{src:s}):s:null},[s]);return t.createElement("div",{className:l("container")},t.createElement("div",{className:l("top")},v||j?t.createElement("div",{className:l("header")},j?t.createElement("span",{className:l("logo")},j):null,v?t.createElement("span",{className:l("title")},v):null):null,P?t.createElement("div",{className:l("desc")},P):null),t.createElement("div",{className:l("main")},t.createElement(Te.Z,(0,V.Z)({isKeyPressSubmit:!0,submitter:B},C),i,b),O?t.createElement("div",{className:l("other")},O):null))}var Le=be,_e=e(9715),Be=e(93766),ea=e(47673),Se=e(4107),Ne=e(87757),k=e.n(Ne),oe=e(92137),q=e(28481),ue=e(64893),De=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Ie=t.forwardRef(function(r,s){var i=(0,t.useState)(r.countDown||60),v=(0,q.Z)(i,2),P=v[0],O=v[1],b=(0,t.useState)(!1),C=(0,q.Z)(b,2),L=C[0],B=C[1],S=(0,t.useState)(),z=(0,q.Z)(S,2),l=z[0],j=z[1],$=r.rules,H=r.name,N=r.phoneName,p=r.fieldProps,d=r.captchaTextRender,h=d===void 0?function(g,Z){return g?"".concat(Z," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:d,f=r.captchaProps,x=(0,X.Z)(r,De),o=function(){var g=(0,oe.Z)(k().mark(function Z(E){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j(!0),n.next=4,x.onGetCaptcha(E);case 4:j(!1),B(!0),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),B(!1),j(!1),console.log(n.t0);case 13:case"end":return n.stop()}},Z,null,[[0,8]])}));return function(E){return g.apply(this,arguments)}}();return(0,t.useEffect)(function(){var g=0,Z=r.countDown;return L&&(g=window.setInterval(function(){O(function(E){return E<=1?(B(!1),clearInterval(g),Z||60):E-1})},1e3)),function(){return clearInterval(g)}},[L]),t.createElement(Be.Z.Item,{noStyle:!0,shouldUpdate:!0},function(g){var Z=g.getFieldValue,E=g.validateFields;return t.createElement("div",{style:(0,c.Z)((0,c.Z)({},p==null?void 0:p.style),{},{display:"flex",alignItems:"center"}),ref:s},t.createElement(Se.Z,(0,V.Z)({},p,{style:{flex:1,transition:"width .3s",marginRight:8}})),t.createElement(R.Z,(0,V.Z)({style:{display:"block"},disabled:L,loading:l},f,{onClick:(0,oe.Z)(k().mark(function ae(){var n;return k().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(F.prev=0,!N){F.next=9;break}return F.next=4,E([N].flat(1));case 4:return n=Z([N].flat(1)),F.next=7,o(n);case 7:F.next=11;break;case 9:return F.next=11,o("");case 11:F.next=16;break;case 13:F.prev=13,F.t0=F.catch(0),console.log(F.t0);case 16:case"end":return F.stop()}},ae,null,[[0,13]])}))}),h(L,P)))})}),ze=(0,ue.Z)(Ie),aa=e(63185),He=e(9676),Re=e(80597),Ae=e(22270),Ve=["options","fieldProps","proFieldProps","valueEnum"],we=t.forwardRef(function(r,s){var i=r.options,v=r.fieldProps,P=r.proFieldProps,O=r.valueEnum,b=(0,X.Z)(r,Ve);return t.createElement(Re.Z,(0,V.Z)({ref:s,valueType:"checkbox",mode:"edit",valueEnum:(0,Ae.h)(O,void 0),fieldProps:(0,c.Z)({options:i},v),proFieldProps:P},b))}),Ge=t.forwardRef(function(r,s){var i=r.fieldProps,v=r.children;return t.createElement(He.Z,(0,V.Z)({ref:s},i),v)}),Ue=(0,ue.Z)(Ge,{valuePropName:"checked"}),ce=Ue;ce.Group=we;var We=ce,_=e(5966),u=e(21010),ke=e(29791),$e=e(36571);function Ke(r,s){return ee.apply(this,arguments)}function ee(){return ee=(0,D.Z)(m().mark(function r(s,i){return m().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,u.WY)("/api/login/captcha",(0,M.Z)({method:"GET",params:(0,M.Z)({},s)},i||{})));case 1:case"end":return P.stop()}},r)})),ee.apply(this,arguments)}var Ye=e(34687),y=e.n(Ye),a=e(85893),de=function(s){var i=s.content;return(0,a.jsx)(Q.Z,{style:{marginBottom:24},message:i,type:"error",showIcon:!0})},Je=function(){var s=(0,t.useState)({}),i=(0,G.Z)(s,2),v=i[0],P=i[1],O=(0,t.useState)("account"),b=(0,G.Z)(O,2),C=b[0],L=b[1],B=(0,u.tT)("@@initialState"),S=B.initialState,z=B.setInitialState,l=(0,u.YB)(),j=function(){var p=(0,D.Z)(m().mark(function d(){var h,f;return m().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S==null||(h=S.fetchUserInfo)===null||h===void 0?void 0:h.call(S);case 2:if(f=o.sent,!f){o.next=6;break}return o.next=6,z(function(g){return(0,M.Z)((0,M.Z)({},g),{},{currentUser:f})});case 6:case"end":return o.stop()}},d)}));return function(){return p.apply(this,arguments)}}(),$=function(){var p=(0,D.Z)(m().mark(function d(h){var f,x,o,g,Z,E;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,$e.x4)((0,M.Z)((0,M.Z)({},h),{},{type:C}));case 3:if(f=n.sent,!f.succeeded){n.next=17;break}return localStorage.setItem("def_token",f.token||""),f.status="ok",x=l.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),A.default.success(x),n.next=11,j();case 11:if(u.m8){n.next=13;break}return n.abrupt("return");case 13:return o=u.m8.location.query,g=o,Z=g.redirect,u.m8.push(Z||"/"),n.abrupt("return");case 17:P(f),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(0),E=l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),A.default.error(E);case 24:case"end":return n.stop()}},d,null,[[0,20]])}));return function(h){return p.apply(this,arguments)}}(),H=v.status,N=v.type;return(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsx)("div",{className:y().lang,"data-lang":!0,children:u.pD&&(0,a.jsx)(u.pD,{})}),(0,a.jsx)("div",{className:y().content,children:(0,a.jsxs)(Le,{logo:(0,a.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:l.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,a.jsx)(u._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,a.jsx)(me,{className:y().icon},"FacebookOutlined"),(0,a.jsx)(he,{className:y().icon},"TwitterOutlined"),(0,a.jsx)(ye.Z,{className:y().icon},"GithubOutlined"),(0,a.jsx)(R.Z,{type:"text",onClick:function(){return u.m8.push("/user/register")},style:{float:"right"},children:"\u0110\u0103ng k\xFD"})],onFinish:function(){var p=(0,D.Z)(m().mark(function d(h){return m().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,$(h);case 2:case"end":return x.stop()}},d)}));return function(d){return p.apply(this,arguments)}}(),children:[(0,a.jsxs)(I.Z,{activeKey:C,onChange:L,children:[(0,a.jsx)(I.Z.TabPane,{tab:l.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,a.jsx)(I.Z.TabPane,{tab:l.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),H==="error"&&N==="account"&&(0,a.jsx)(de,{content:l.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),C==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(Ce.Z,{className:y().prefixIcon})},placeholder:l.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,a.jsx)(u._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,a.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(le,{className:y().prefixIcon})},placeholder:l.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,a.jsx)(u._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),H==="error"&&N==="mobile"&&(0,a.jsx)(de,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),C==="mobile"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(Me,{className:y().prefixIcon})},name:"mobile",placeholder:l.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,a.jsx)(u._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,a.jsx)(u._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,a.jsx)(ze,{fieldProps:{size:"large",prefix:(0,a.jsx)(le,{className:y().prefixIcon})},captchaProps:{size:"large"},placeholder:l.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(d,h){return d?"".concat(h," ").concat(l.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):l.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,a.jsx)(u._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var p=(0,D.Z)(m().mark(function d(h){var f;return m().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ke({phone:h});case 2:if(f=o.sent,f!==!1){o.next=5;break}return o.abrupt("return");case 5:A.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return o.stop()}},d)}));return function(d){return p.apply(this,arguments)}}()})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)(We,{noStyle:!0,name:"autoLogin",children:(0,a.jsx)(u._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,a.jsx)("a",{style:{float:"right"},children:(0,a.jsx)(u._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,a.jsx)(ke.Z,{})]})},Qe=Je}}]);
