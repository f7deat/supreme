(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[992],{88890:function(fe,z,t){"use strict";t.r(z),t.d(z,{default:function(){return ve}});var ge=t(58024),U=t(39144),xe=t(20136),W=t(55241),je=t(57663),L=t(71577),Ze=t(47673),h=t(4107),Ee=t(34792),X=t(48086),Y=t(3182),pe=t(12968),$=t(62462),d=t(2824),w=t(94043),M=t.n(w),k=t(5966),v=t(952),H=t(64317),q=t(85589),K=t.n(q),r=t(67294),b=t(36571),_=t(51742),ee=t(63258),te=t(95357),ne=t(26667),ae=t(70844),Ce=t(22385),se=t(61580),Se=t(71153),Q=t(60331),J=t(86582),le=t(49101),e=t(85893),ie=function(c){var u=c.tags,Z=c.setTags,C=(0,r.useState)(""),S=(0,d.Z)(C,2),m=S[0],I=S[1],T=(0,r.useState)(!1),y=(0,d.Z)(T,2),f=y[0],P=y[1],N=(0,r.useState)(""),g=(0,d.Z)(N,2),x=g[0],A=g[1],V=(0,r.useState)(-1),F=(0,d.Z)(V,2),E=F[0],B=F[1],j=(0,r.useRef)(),R=function(a){var D=u.filter(function(O){return O!==a});Z(D)},o=function(){var a;P(!0),(a=j.current)===null||a===void 0||a.focus()},i=function(a){I(a.target.value)},s=function(){var a=u;m&&u.indexOf(m)===-1&&(a=[].concat((0,J.Z)(u),[m])),I(""),P(!1),Z(a)},l=function(a){A(a.target.value)},p=function(){var a=(0,J.Z)(u);Z(a),a[E]=x,B(-1),A("")};return(0,e.jsxs)(e.Fragment,{children:[u.map(function(n,a){if(E===a)return(0,e.jsx)(h.Z,{ref:j,size:"small",className:"tag-input",value:x,onChange:l,onBlur:p,onPressEnter:p},n);var D=n.length>20,O=(0,e.jsx)(Q.Z,{closable:a!==0,onClose:function(){return R(n)},children:(0,e.jsx)("span",{onDoubleClick:function(me){if(a!==0){var G;(G=j.current)===null||G===void 0||G.focus(),me.preventDefault()}},children:D?"".concat(n.slice(0,20),"..."):n})},n);return D?(0,e.jsx)(se.Z,{title:n,children:O},n):O}),f&&(0,e.jsx)(h.Z,{ref:j,type:"text",className:"w-20",size:"small",value:m,onChange:i,onBlur:s,onPressEnter:s}),!f&&(0,e.jsxs)(Q.Z,{className:"site-tag-plus",onClick:o,children:[(0,e.jsx)(le.Z,{})," New Tag"]})]})},re=ie,ue=t(51615),oe=t(21010),de=function(){var c=(0,ue.UO)(),u=(0,r.useRef)(),Z=(0,r.useState)(),C=(0,d.Z)(Z,2),S=C[0],m=C[1],I=(0,r.useState)(""),T=(0,d.Z)(I,2),y=T[0],f=T[1],P=(0,r.useState)([]),N=(0,d.Z)(P,2),g=N[0],x=N[1],A=(0,r.useState)(!1),V=(0,d.Z)(A,2),F=V[0],E=V[1];(0,r.useEffect)(function(){(0,_.KQ)().then(function(o){m(o.map(function(i){return{value:i.id,label:i.name}}))})},[]),(0,r.useEffect)(function(){if(c.id)(0,b.xl)(c.id).then(function(i){var s,l=i.post,p=i.categories;f(l.thumbnail),l.tags&&x(l.tags.split(",")),(s=u.current)===null||s===void 0||s.setFields([{name:"id",value:l.id},{name:"title",value:l.title},{name:"url",value:l.url},{name:"description",value:l.description},{name:"thumbnail",value:l.thumbnail},{name:"content",value:K().createEditorState(l.content)},{name:"categories",value:p},{name:"status",value:l.status}])});else{var o;(o=u.current)===null||o===void 0||o.resetFields(),x([]),f("")}},[c.id]);var B=(0,e.jsx)($.Z,{src:y,width:200,height:150}),j=function(){var o=(0,Y.Z)(M().mark(function i(s){var l;return M().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s.content=s.content.toHTML(),g?s.tags=g.join(","):s.tags="",!c.id){n.next=8;break}return n.next=5,(0,b.CP)(s);case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=(0,b.q2)(s);case 9:l=n.t0,l.succeeded?oe.m8.push("/blog/post"):X.default.error(l.message);case 11:case"end":return n.stop()}},i)}));return function(s){return o.apply(this,arguments)}}(),R=function(i){var s;f(i),(s=u.current)===null||s===void 0||s.setFieldsValue({thumbnail:i})};return(0,e.jsx)(ae.ZP,{title:"Start writing",children:(0,e.jsx)(U.Z,{children:(0,e.jsxs)(v.ZP,{onFinish:j,formRef:u,children:[(0,e.jsx)(v.ZP.Item,{name:"id",hidden:!0,children:(0,e.jsx)(h.Z,{})}),(0,e.jsx)(k.Z,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0}]}),(0,e.jsx)(v.ZP.Item,{name:"url",label:"\u0110\u01B0\u1EDDng d\u1EABn",children:(0,e.jsx)(h.Z,{})}),(0,e.jsx)(v.ZP.Item,{name:"description",label:"M\xF4 t\u1EA3",children:(0,e.jsx)(h.Z.TextArea,{})}),(0,e.jsx)(v.ZP.Item,{name:"content",label:"N\u1ED9i dung",rules:[{required:!0}],children:(0,e.jsx)(K(),{language:"en",style:{border:"1px solid #d1d1d1"}})}),(0,e.jsx)("div",{className:"mb-2",children:"\u1EA2nh \u0111\u1EA1i di\u1EC7n"}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(v.ZP.Item,{name:"thumbnail",children:(0,e.jsx)(h.Z,{})})}),(0,e.jsx)(L.Z,{type:"primary",icon:(0,e.jsx)(ee.Z,{}),onClick:function(){return E(!0)},children:"Explorer"}),(0,e.jsx)(W.Z,{content:B,children:(0,e.jsx)(L.Z,{icon:(0,e.jsx)(te.Z,{}),children:"Preview"})})]}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(v.ZP.Item,{name:"categories",label:"Danh m\u1EE5c",children:(0,e.jsx)(H.Z,{fieldProps:{mode:"multiple"},options:S})})}),(0,e.jsx)(v.ZP.Item,{name:"status",label:"Tr\u1EA1ng th\xE1i",initialValue:1,children:(0,e.jsx)(H.Z,{allowClear:!1,options:[{value:0,label:"Draft"},{value:1,label:"Active"}]})})]}),(0,e.jsx)("div",{className:"mb-2",children:"Tags"}),(0,e.jsx)("div",{className:"mb-4",children:(0,e.jsx)(re,{tags:g,setTags:x})}),(0,e.jsx)(ne.Z,{visible:F,onVisibleChange:E,onSelect:R})]})})})},ve=de}}]);
