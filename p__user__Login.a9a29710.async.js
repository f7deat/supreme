(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{79728:function(w,B,e){"use strict";e.d(B,{Z:function(){return R}});var b=e(28991),F=e(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},I=G,W=e(27029),j=function(M,P){return F.createElement(W.Z,(0,b.Z)((0,b.Z)({},M),{},{ref:P,icon:I}))};j.displayName="FacebookOutlined";var R=F.forwardRef(j)},75013:function(w,B,e){"use strict";e.d(B,{Z:function(){return R}});var b=e(28991),F=e(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"},I=G,W=e(27029),j=function(M,P){return F.createElement(W.Z,(0,b.Z)((0,b.Z)({},M),{},{ref:P,icon:I}))};j.displayName="TwitterOutlined";var R=F.forwardRef(j)},5966:function(w,B,e){"use strict";var b=e(22122),F=e(81253),G=e(67294),I=e(33400),W=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],R="text",V=function(D){var Y=D.fieldProps,k=D.proFieldProps,p=(0,F.Z)(D,W);return G.createElement(I.Z,(0,b.Z)({mode:"edit",valueType:R,fieldProps:Y,filedConfig:{valueType:R},proFieldProps:k},p))},M=function(D){var Y=D.fieldProps,k=D.proFieldProps,p=(0,F.Z)(D,j);return G.createElement(I.Z,(0,b.Z)({mode:"edit",valueType:"password",fieldProps:Y,proFieldProps:k,filedConfig:{valueType:R}},p))},P=V;P.Password=M,P.displayName="ProFormComponent",B.Z=P},34687:function(w){w.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},5482:function(w,B,e){"use strict";e.r(B),e.d(B,{default:function(){return ke}});var b=e(18106),F=e(16004),G=e(48736),I=e(27049),W=e(49111),j=e(19650),R=e(34792),V=e(48086),M=e(11849),P=e(3182),q=e(2824),D=e(17462),Y=e(76772),k=e(94043),p=e.n(k),T=e(28991),r=e(67294),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ge=ve,ne=e(27029),se=function(l,d){return r.createElement(ne.Z,(0,T.Z)((0,T.Z)({},l),{},{ref:d,icon:ge}))};se.displayName="LockOutlined";var le=r.forwardRef(se),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},me=fe,ie=function(l,d){return r.createElement(ne.Z,(0,T.Z)((0,T.Z)({},l),{},{ref:d,icon:me}))};ie.displayName="MobileOutlined";var he=r.forwardRef(ie),pe=e(79728),xe=e(75013),Ze=e(78874),Pe=e(89366),J=e(22122),Qe=e(84305),Fe=e(75901),ee=e(81253),Me=e(5894),ye=e(54787),Xe=e(32384),je=["logo","message","contentStyle","title","subTitle","actions","children"];function Te(t){var l=t.logo,d=t.message,y=t.contentStyle,x=t.title,H=t.subTitle,L=t.actions,N=t.children,o=(0,ee.Z)(t,je),z=(0,ye.YB)(),U=o.submitter===!1?!1:(0,T.Z)((0,T.Z)({searchConfig:{submitText:z.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},o.submitter),{},{render:function(E,S){var A,m,c=S.pop();if((o==null||(A=o.submitter)===null||A===void 0?void 0:A.render)===void 0)return c;if(typeof(o==null||(m=o.submitter)===null||m===void 0?void 0:m.render)=="function"){var u,v;return o==null||(u=o.submitter)===null||u===void 0||(v=u.render)===null||v===void 0?void 0:v.call(u,E,S)}return c}}),K=(0,r.useContext)(Fe.ZP.ConfigContext),f=K.getPrefixCls("pro-form-login"),Z=function(E){return"".concat(f,"-").concat(E)},$=(0,r.useMemo)(function(){return l?typeof l=="string"?r.createElement("img",{src:l}):l:null},[l]);return r.createElement("div",{className:Z("container")},r.createElement("div",{className:Z("top")},x||$?r.createElement("div",{className:Z("header")},$?r.createElement("span",{className:Z("logo")},$):null,x?r.createElement("span",{className:Z("title")},x):null):null,H?r.createElement("div",{className:Z("desc")},H):null),r.createElement("div",{className:Z("main"),style:(0,T.Z)({width:328},y)},r.createElement(Me.A,(0,J.Z)({isKeyPressSubmit:!0},o,{submitter:U}),d,N),L?r.createElement("div",{className:Z("other")},L):null))}var qe=e(9715),Ce=e(86835),_e=e(57663),Ee=e(71577),ea=e(47673),Oe=e(4107),be=e(87757),_=e.n(be),oe=e(92137),ae=e(28481),ue=e(64893),Le=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Ne=r.forwardRef(function(t,l){var d=(0,r.useState)(t.countDown||60),y=(0,ae.Z)(d,2),x=y[0],H=y[1],L=(0,r.useState)(!1),N=(0,ae.Z)(L,2),o=N[0],z=N[1],U=(0,r.useState)(),K=(0,ae.Z)(U,2),f=K[0],Z=K[1],$=t.rules,Q=t.name,E=t.phoneName,S=t.fieldProps,A=t.captchaTextRender,m=A===void 0?function(s,i){return s?"".concat(i," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:A,c=t.captchaProps,u=(0,ee.Z)(t,Le),v=function(){var s=(0,oe.Z)(_().mark(function i(O){return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,Z(!0),h.next=4,u.onGetCaptcha(O);case 4:Z(!1),z(!0),h.next=13;break;case 8:h.prev=8,h.t0=h.catch(0),z(!1),Z(!1),console.log(h.t0);case 13:case"end":return h.stop()}},i,null,[[0,8]])}));return function(O){return s.apply(this,arguments)}}();return(0,r.useEffect)(function(){var s=0,i=t.countDown;return o&&(s=window.setInterval(function(){H(function(O){return O<=1?(z(!1),clearInterval(s),i||60):O-1})},1e3)),function(){return clearInterval(s)}},[o]),r.createElement(Ce.Z.Item,{noStyle:!0,shouldUpdate:!0},function(s){var i=s.getFieldValue,O=s.validateFields;return r.createElement("div",{style:(0,T.Z)((0,T.Z)({},S==null?void 0:S.style),{},{display:"flex",alignItems:"center"}),ref:l},r.createElement(Oe.Z,(0,J.Z)({},S,{style:{flex:1,transition:"width .3s",marginRight:8}})),r.createElement(Ee.Z,(0,J.Z)({style:{display:"block"},disabled:o,loading:f},c,{onClick:(0,oe.Z)(_().mark(function X(){var h;return _().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!E){n.next=9;break}return n.next=4,O([E].flat(1));case 4:return h=i([E].flat(1)),n.next=7,v(h);case 7:n.next=11;break;case 9:return n.next=11,v("");case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop()}},X,null,[[0,13]])}))}),m(o,x)))})}),Se=(0,ue.G)(Ne),Be=Se,aa=e(63185),Ie=e(9676),Re=e(33400),De=e(22270),He=["options","fieldProps","proFieldProps","valueEnum"],ze=r.forwardRef(function(t,l){var d=t.options,y=t.fieldProps,x=t.proFieldProps,H=t.valueEnum,L=(0,ee.Z)(t,He);return r.createElement(Re.Z,(0,J.Z)({ref:l,valueType:"checkbox",mode:"edit",valueEnum:(0,De.h)(H,void 0),fieldProps:(0,T.Z)({options:d},y),proFieldProps:x},L))}),Ae=r.forwardRef(function(t,l){var d=t.fieldProps,y=t.children;return r.createElement(Ie.Z,(0,J.Z)({ref:l},d),y)}),Ge=(0,ue.G)(Ae,{valuePropName:"checked"}),de=Ge;de.Group=ze;var Ve=de,te=e(5966),g=e(21010),Ue=e(73727),We=e(29791),Ke=e(36571);function $e(t,l){return re.apply(this,arguments)}function re(){return re=(0,P.Z)(p().mark(function t(l,d){return p().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,g.WY)("/api/login/captcha",(0,M.Z)({method:"GET",params:(0,M.Z)({},l)},d||{})));case 1:case"end":return x.stop()}},t)})),re.apply(this,arguments)}var we=e(34687),C=e.n(we),a=e(85893),ce=function(l){var d=l.content;return(0,a.jsx)(Y.Z,{style:{marginBottom:24},message:d,type:"error",showIcon:!0})},Ye=function(){var l=(0,r.useState)({}),d=(0,q.Z)(l,2),y=d[0],x=d[1],H=(0,r.useState)("account"),L=(0,q.Z)(H,2),N=L[0],o=L[1],z=(0,g.tT)("@@initialState"),U=z.initialState,K=z.setInitialState,f=(0,g.YB)(),Z=function(){var m=(0,P.Z)(p().mark(function c(){var u;return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(u=U==null?void 0:U.fetchUserInfo,!u){s.next=4;break}return s.next=4,K(function(i){return(0,M.Z)((0,M.Z)({},i),{},{currentUser:u})});case 4:case"end":return s.stop()}},c)}));return function(){return m.apply(this,arguments)}}(),$=function(){var m=(0,P.Z)(p().mark(function c(u){var v,s,i,O,X,h;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Ke.x4)((0,M.Z)((0,M.Z)({},u),{},{type:N}));case 3:if(v=n.sent,!v.succeeded){n.next=18;break}localStorage.setItem("def_token",v.token||""),v.status="ok",s=f.formatMessage({id:"pages.login.success",defaultMessage:"\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng!"}),V.default.success(s);debugger;return n.next=12,Z();case 12:if(g.m8){n.next=14;break}return n.abrupt("return");case 14:return i=g.m8.location.query,O=i,X=O.redirect,g.m8.push(X||"/"),n.abrupt("return");case 18:v.status="error",x(v),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(0),h=f.formatMessage({id:"pages.login.failure",defaultMessage:"\u0110\u0103ng nh\u1EADp th\u1EA5t b\u1EA1i!"}),V.default.error(h);case 26:case"end":return n.stop()}},c,null,[[0,22]])}));return function(u){return m.apply(this,arguments)}}(),Q=y.status,E=y.type,S=function(){return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(g._H,{id:"pages.login.loginWith",defaultMessage:"Logion with"},"loginWith")}),(0,a.jsxs)(j.Z,{align:"center",children:[(0,a.jsx)(pe.Z,{className:C().icon},"FacebookOutlined"),(0,a.jsx)(xe.Z,{className:C().icon},"TwitterOutlined"),(0,a.jsx)(Ze.Z,{className:C().icon},"GithubOutlined")]})]})},A=function(){return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(j.Z,{align:"center",children:["Not a member?",(0,a.jsx)(Ue.rU,{to:"/user/register",children:(0,a.jsx)(g._H,{id:"global.register",defaultMessage:"\u0110\u0103ng k\xFD"})})]})})};return(0,a.jsxs)("div",{className:C().container,children:[(0,a.jsx)("div",{className:C().lang,"data-lang":!0,children:g.pD&&(0,a.jsx)(g.pD,{})}),(0,a.jsx)("div",{className:C().content,children:(0,a.jsxs)(Te,{logo:(0,a.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"DefZone.Net",subTitle:f.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,a.jsx)(S,{},0),(0,a.jsx)(I.Z,{},1),(0,a.jsx)(A,{},2)],onFinish:function(){var m=(0,P.Z)(p().mark(function c(u){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,$(u);case 2:case"end":return s.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),children:[(0,a.jsxs)(F.Z,{activeKey:N,onChange:o,children:[(0,a.jsx)(F.Z.TabPane,{tab:f.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"Account login"})},"account"),(0,a.jsx)(F.Z.TabPane,{tab:f.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"Phone login"})},"mobile")]}),Q==="error"&&E==="account"&&(0,a.jsx)(ce,{content:f.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),N==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(te.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(Pe.Z,{className:C().prefixIcon})},placeholder:f.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,a.jsx)(g._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,a.jsx)(te.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(le,{className:C().prefixIcon})},placeholder:f.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,a.jsx)(g._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),Q==="error"&&E==="mobile"&&(0,a.jsx)(ce,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),N==="mobile"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(te.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(he,{className:C().prefixIcon})},name:"mobile",placeholder:f.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,a.jsx)(g._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,a.jsx)(g._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,a.jsx)(Be,{fieldProps:{size:"large",prefix:(0,a.jsx)(le,{className:C().prefixIcon})},captchaProps:{size:"large"},placeholder:f.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(c,u){return c?"".concat(u," ").concat(f.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):f.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,a.jsx)(g._H,{id:"pages.login.captcha.required",defaultMessage:"Please input captcha!"})}],onGetCaptcha:function(){var m=(0,P.Z)(p().mark(function c(u){var v;return p().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,$e({phone:u});case 2:if(v=i.sent,v!==!1){i.next=5;break}return i.abrupt("return");case 5:V.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return i.stop()}},c)}));return function(c){return m.apply(this,arguments)}}()})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)(Ve,{noStyle:!0,name:"autoLogin",children:(0,a.jsx)(g._H,{id:"pages.login.rememberMe",defaultMessage:"Remember me"})}),(0,a.jsx)("a",{style:{float:"right"},children:(0,a.jsx)(g._H,{id:"pages.login.forgotPassword",defaultMessage:"Forgot password"})})]})]})}),(0,a.jsx)(We.Z,{})]})},ke=Ye}}]);
