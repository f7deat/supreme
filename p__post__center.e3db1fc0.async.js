(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[992],{97575:function(Ne,M,a){"use strict";a.r(M),a.d(M,{default:function(){return Ie}});var De=a(58024),q=a(39144),Ve=a(20136),_=a(55241),Ae=a(57663),z=a(71577),Be=a(47673),y=a(4107),Oe=a(34792),H=a(48086),J=a(3182),Ge=a(12968),ee=a(62462),f=a(2824),te=a(94043),A=a.n(te),Q=a(5966),j=a(952),W=a(64317),n=a(67294),O=a(36571),ae=a(51742),ne=a(63258),se=a(95357),le=a(26667),re=a(67265),Re=a(22385),ie=a(69713),Ke=a(71153),Y=a(60331),U=a(86582),oe=a(49101),t=a(85893),ue=function(l){var e=l.tags,u=l.setTags,h=(0,n.useState)(""),i=(0,f.Z)(h,2),d=i[0],Z=i[1],E=(0,n.useState)(!1),g=(0,f.Z)(E,2),I=g[0],p=g[1],N=(0,n.useState)(""),P=(0,f.Z)(N,2),F=P[0],T=P[1],x=(0,n.useState)(-1),b=(0,f.Z)(x,2),D=b[0],V=b[1],C=(0,n.useRef)(),G=function(s){var o=e.filter(function(B){return B!==s});u(o)},R=function(){var s;p(!0),(s=C.current)===null||s===void 0||s.focus()},K=function(s){Z(s.target.value)},m=function(){var s=e;d&&e.indexOf(d)===-1&&(s=[].concat((0,U.Z)(e),[d])),Z(""),p(!1),u(s)},v=function(s){T(s.target.value)},c=function(){var s=(0,U.Z)(e);u(s),s[D]=F,V(-1),T("")};return(0,t.jsxs)(t.Fragment,{children:[e.map(function(r,s){if(D===s)return(0,t.jsx)(y.Z,{ref:C,size:"small",className:"tag-input",value:F,onChange:v,onBlur:c,onPressEnter:c},r);var o=r.length>20,B=(0,t.jsx)(Y.Z,{closable:s!==0,onClose:function(){return G(r)},children:(0,t.jsx)("span",{onDoubleClick:function(be){if(s!==0){var L;(L=C.current)===null||L===void 0||L.focus(),be.preventDefault()}},children:o?"".concat(r.slice(0,20),"..."):r})},r);return o?(0,t.jsx)(ie.Z,{title:r,children:B},r):B}),I&&(0,t.jsx)(y.Z,{ref:C,type:"text",className:"w-20",size:"small",value:d,onChange:K,onBlur:m,onPressEnter:m}),!I&&(0,t.jsxs)(Y.Z,{className:"site-tag-plus",onClick:R,children:[(0,t.jsx)(oe.Z,{})," New Tag"]})]})},de=ue,X=a(21010),ve=a(5977),ce=a(22122),fe=a(28991),he=a(81253),me=a(80597),ge=a(66758),xe=["fieldProps","proFieldProps"],$="dateTime",Ze=n.forwardRef(function(S,l){var e=S.fieldProps,u=S.proFieldProps,h=(0,he.Z)(S,xe),i=(0,n.useContext)(ge.Z);return n.createElement(me.Z,(0,ce.Z)({ref:l,mode:"edit",fieldProps:(0,fe.Z)({getPopupContainer:i.getPopupContainer},e),valueType:$,proFieldProps:u,filedConfig:{valueType:$,customLightMode:!0}},h))}),je=Ze,pe=function(l){var e=l.data,u=(0,n.useRef)();(0,n.useEffect)(function(){var i;(i=u.current)===null||i===void 0||i.setFields([{name:"id",value:e==null?void 0:e.id},{name:"createdDate",value:e==null?void 0:e.createdDate}])},[e]);var h=function(){var i=(0,J.Z)(A().mark(function d(Z){return A().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:H.default.info(JSON.stringify(Z));case 1:case"end":return g.stop()}},d)}));return function(Z){return i.apply(this,arguments)}}();return(0,t.jsxs)(j.ZP,{onFinish:h,formRef:u,children:[(0,t.jsx)(Q.Z,{name:"id",hidden:!0}),(0,t.jsx)(je,{name:"createdDate",label:"Created date"})]})},Se=pe,w=a(11849),Ce=a(85589),k=a.n(Ce),Ee=function(l){var e=(0,X.YB)(),u=(0,n.useState)("en"),h=(0,f.Z)(u,2),i=h[0],d=h[1];return(0,n.useEffect)(function(){switch(e.locale){case"vi-VN":d("vi-vn");break;default:d("en");break}},[e.locale]),(0,t.jsx)(k(),(0,w.Z)((0,w.Z)({},l),{},{language:i,style:{border:"1px solid #d1d1d1"}}))},Pe=Ee,Te=function(l){var e=l.post,u=l.categories,h=(0,n.useState)(),i=(0,f.Z)(h,2),d=i[0],Z=i[1],E=(0,n.useState)(""),g=(0,f.Z)(E,2),I=g[0],p=g[1],N=(0,n.useState)(!1),P=(0,f.Z)(N,2),F=P[0],T=P[1],x=(0,n.useRef)(),b=(0,n.useState)([]),D=(0,f.Z)(b,2),V=D[0],C=D[1];(0,n.useEffect)(function(){(0,ae.KQ)().then(function(m){Z(m.map(function(v){return{value:v.id,label:v.name}}))})},[]),(0,n.useEffect)(function(){if(l.id){var m;p((e==null?void 0:e.thumbnail)||""),e!=null&&e.tags&&C(e.tags.split(",")),(m=x.current)===null||m===void 0||m.setFields([{name:"id",value:e==null?void 0:e.id},{name:"title",value:e==null?void 0:e.title},{name:"url",value:e==null?void 0:e.url},{name:"description",value:e==null?void 0:e.description},{name:"thumbnail",value:e==null?void 0:e.thumbnail},{name:"content",value:k().createEditorState(e==null?void 0:e.content)},{name:"categories",value:u},{name:"status",value:e==null?void 0:e.status}])}else{var v;(v=x.current)===null||v===void 0||v.resetFields(),C([]),p("")}},[u,e,l.id]);var G=(0,t.jsx)(ee.Z,{src:I,width:200,height:150}),R=function(){var m=(0,J.Z)(A().mark(function v(c){var r;return A().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(c.content=c.content.toHTML(),V?c.tags=V.join(","):c.tags="",!l.id){o.next=8;break}return o.next=5,(0,O.CP)(c);case 5:o.t0=o.sent,o.next=11;break;case 8:return o.next=10,(0,O.q2)(c);case 10:o.t0=o.sent;case 11:r=o.t0,r.succeeded?X.m8.push("/blog/post"):H.default.error(r.message);case 13:case"end":return o.stop()}},v)}));return function(c){return m.apply(this,arguments)}}(),K=function(v){var c;p(v),(c=x.current)===null||c===void 0||c.setFieldsValue({thumbnail:v})};return(0,t.jsxs)(j.ZP,{onFinish:R,formRef:x,children:[(0,t.jsx)(j.ZP.Item,{name:"id",hidden:!0,children:(0,t.jsx)(y.Z,{})}),(0,t.jsx)(Q.Z,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0}]}),(0,t.jsx)(j.ZP.Item,{name:"url",label:"\u0110\u01B0\u1EDDng d\u1EABn",children:(0,t.jsx)(y.Z,{})}),(0,t.jsx)(j.ZP.Item,{name:"description",label:"M\xF4 t\u1EA3",children:(0,t.jsx)(y.Z.TextArea,{})}),(0,t.jsx)(j.ZP.Item,{name:"content",label:"N\u1ED9i dung",rules:[{required:!0}],children:(0,t.jsx)(Pe,{})}),(0,t.jsx)("div",{className:"mb-2",children:"\u1EA2nh \u0111\u1EA1i di\u1EC7n"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)(j.ZP.Item,{name:"thumbnail",children:(0,t.jsx)(y.Z,{})})}),(0,t.jsx)(z.Z,{type:"primary",icon:(0,t.jsx)(ne.Z,{}),onClick:function(){return T(!0)},children:"Explorer"}),(0,t.jsx)(_.Z,{content:G,children:(0,t.jsx)(z.Z,{icon:(0,t.jsx)(se.Z,{}),children:"Preview"})})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)(j.ZP.Item,{name:"categories",label:"Danh m\u1EE5c",children:(0,t.jsx)(W.Z,{fieldProps:{mode:"multiple"},options:d})})}),(0,t.jsx)(j.ZP.Item,{name:"status",label:"Tr\u1EA1ng th\xE1i",initialValue:1,children:(0,t.jsx)(W.Z,{allowClear:!1,options:[{value:0,label:"Draft"},{value:1,label:"Active"}]})})]}),(0,t.jsx)("div",{className:"mb-2",children:"Tags"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(de,{tags:V,setTags:C})}),(0,t.jsx)(le.Z,{visible:F,onVisibleChange:T,onSelect:K})]})},ye=function(){var l=(0,ve.UO)(),e=(0,n.useState)(""),u=(0,f.Z)(e,2),h=u[0],i=u[1],d=(0,n.useState)(),Z=(0,f.Z)(d,2),E=Z[0],g=Z[1],I=(0,n.useState)(),p=(0,f.Z)(I,2),N=p[0],P=p[1];(0,n.useEffect)(function(){(0,O.xl)(l.id).then(function(x){g(x.post),P(x.categories)})},[l.id]);var F=function(b){i(b)},T=function(){return h==="setting"?(0,t.jsx)(Se,{data:E}):(0,t.jsx)(Te,{id:l.id,post:E,categories:N})};return(0,t.jsx)(re.ZP,{title:"Start writing",onTabChange:F,tabList:[{tab:"General",key:"general"},{tab:"Setting",key:"setting"}],children:(0,t.jsx)(q.Z,{children:T()})})},Ie=ye}}]);
