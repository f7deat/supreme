(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[166],{26667:function(oe,w,e){"use strict";var Q=e(57338),c=e(25084),ae=e(66456),n=e(57241),h=e(57663),S=e(71577),f=e(2824),se=e(20136),b=e(55241),F=e(12968),M=e(62462),$=e(43581),i=e(92374),A=e(67294),Z=e(61685),O=e(85893),B=function(s){switch(s.extension.toLowerCase()){case".png":case".jpg":return(0,O.jsx)(b.Z,{content:(0,O.jsx)(M.Z,{src:"https://defzone.net/files/".concat(s.name),width:100}),className:"font-bold text-primary cursor-default",children:s.name});default:return(0,O.jsx)("div",{className:"font-bold text-primary cursor-default",children:s.name})}},J=function(s){var E=(0,A.useState)(),m=(0,f.Z)(E,2),u=m[0],X=m[1];(0,A.useEffect)(function(){s.visible&&(0,i.ad)({current:1,pageSize:10,name:""}).then(function(j){return X(j.data)})},[s.visible]);var N=function(r){s.onSelect("".concat(Z.y,"/files/").concat(r)),s.onVisibleChange(!1)},R=[{title:"#",render:function(r,o,a){return a+1}},{title:(0,O.jsx)($._H,{defaultMessage:"Name",id:"global.name"}),render:function(r,o){return B(o)}},{title:"Uploaded date",dataIndex:"uploadedDate"},{title:"Size",render:function(r){return r.size+"KB"}},{title:"Action",render:function(r,o){return(0,O.jsx)(S.Z,{type:"primary",onClick:function(){return N(o.name)},children:"Choose"})}}];return(0,O.jsx)(c.Z,{visible:s.visible,width:window.innerWidth-500,onClose:function(){return s.onVisibleChange(!1)},children:(0,O.jsx)(n.Z,{columns:R,dataSource:u,rowSelection:{}},"id")})};w.Z=J},84448:function(oe,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Se}});var Q=e(62350),c=e(75443),ae=e(57663),n=e(71577),h=e(34792),S=e(48086),f=e(2824),se=e(8212),b=e(73171),F=e(49101),M=e(70844),$=e(81531),i=e(67294),A=e(43581),Z=e(36571),O=e(20136),B=e(55241),J=e(47673),P=e(4107),s=e(3182),E=e(12968),m=e(62462),u=e(94043),X=e.n(u),N=e(5966),R=e(952),j=e(71975),r=e(64317),o=e(85589),a=e.n(o),l=e(51742),ue=e(22385),ve=e(69713),be=e(71153),fe=e(60331),pe=e(86582),t=e(85893),ge=function(x){var C=x.tags,G=x.setTags,K=(0,i.useState)(""),k=(0,f.Z)(K,2),U=k[0],q=k[1],z=(0,i.useState)(!1),H=(0,f.Z)(z,2),L=H[0],Y=H[1],ee=(0,i.useState)(""),W=(0,f.Z)(ee,2),V=W[0],te=W[1],D=(0,i.useState)(-1),v=(0,f.Z)(D,2),g=v[0],ne=v[1],re=(0,i.useRef)(),de=function(d){var le=C.filter(function(ie){return ie!==d});G(le)},ce=function(){var d;Y(!0),(d=re.current)===null||d===void 0||d.focus()},I=function(d){q(d.target.value)},_=function(){var d=C;U&&C.indexOf(U)===-1&&(d=[].concat((0,pe.Z)(C),[U])),q(""),Y(!1),G(d)},y=function(d){te(d.target.value)},T=function(){var d=(0,pe.Z)(C);G(d),d[g]=V,ne(-1),te("")};return(0,t.jsxs)(t.Fragment,{children:[C.map(function(p,d){if(g===d)return(0,t.jsx)(P.Z,{ref:re,size:"small",className:"tag-input",value:V,onChange:y,onBlur:T,onPressEnter:T},p);var le=p.length>20,ie=(0,t.jsx)(fe.Z,{closable:d!==0,onClose:function(){return de(p)},children:(0,t.jsx)("span",{onDoubleClick:function(Ie){if(d!==0){var me;(me=re.current)===null||me===void 0||me.focus(),Ie.preventDefault()}},children:le?"".concat(p.slice(0,20),"..."):p})},p);return le?(0,t.jsx)(ve.Z,{title:p,children:ie},p):ie}),L&&(0,t.jsx)(P.Z,{ref:re,type:"text",width:78,size:"small",value:U,onChange:I,onBlur:_,onPressEnter:_}),!L&&(0,t.jsxs)(fe.Z,{className:"site-tag-plus",onClick:ce,children:[(0,t.jsx)(F.Z,{})," New Tag"]})]})},Ee=ge,ye=e(63258),Pe=e(95357),Ze=e(26667),Ce=function(x){var C=(0,i.useRef)(),G=(0,i.useState)(),K=(0,f.Z)(G,2),k=K[0],U=K[1],q=(0,i.useState)(""),z=(0,f.Z)(q,2),H=z[0],L=z[1],Y=(0,i.useState)([]),ee=(0,f.Z)(Y,2),W=ee[0],V=ee[1],te=(0,i.useState)(!1),D=(0,f.Z)(te,2),v=D[0],g=D[1];(0,i.useEffect)(function(){(0,l.KQ)().then(function(I){U(I.map(function(_){return{value:_.id,label:_.name}}))})},[]),(0,i.useEffect)(function(){if(x.postId!==0)(0,Z.xl)(x.postId).then(function(_){var y,T=_.post,p=_.categories;L(T.thumbnail),T.tags&&V(T.tags.split(",")),(y=C.current)===null||y===void 0||y.setFields([{name:"id",value:T.id},{name:"title",value:T.title},{name:"url",value:T.url},{name:"description",value:T.description},{name:"thumbnail",value:T.thumbnail},{name:"content",value:a().createEditorState(T.content)},{name:"categories",value:p},{name:"status",value:T.status}])});else{var I;(I=C.current)===null||I===void 0||I.resetFields(),V([]),L("")}},[x.postId]);var ne=function(){x.setVisible(!1),x.reload()},re=(0,t.jsx)(m.Z,{src:H,width:200,height:150}),de=function(){var I=(0,s.Z)(X().mark(function _(y){return X().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:y.content=y.content.toHTML(),W?y.tags=W.join(","):y.tags="",x.postId!==0?(0,Z.CP)(y).then(function(d){d.succeeded?(S.default.success("succeeded!"),ne()):S.default.error("faild!")}):(0,Z.q2)(y).then(function(d){d.succeeded?(S.default.success("succeeded!"),ne()):S.default.error("faild!")});case 3:case"end":return p.stop()}},_)}));return function(y){return I.apply(this,arguments)}}(),ce=function(_){var y;L(_),(y=C.current)===null||y===void 0||y.setFieldsValue({thumbnail:_})};return(0,t.jsxs)(j.Z,{width:window.innerWidth-window.innerWidth/4,visible:x.visible,onFinish:de,onVisibleChange:x.setVisible,formRef:C,children:[(0,t.jsx)(R.ZP.Item,{name:"id",hidden:!0,children:(0,t.jsx)(P.Z,{})}),(0,t.jsx)(N.Z,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0}]}),(0,t.jsx)(R.ZP.Item,{name:"url",label:"\u0110\u01B0\u1EDDng d\u1EABn",rules:[{required:!0}],children:(0,t.jsx)(P.Z,{})}),(0,t.jsx)(R.ZP.Item,{name:"description",label:"M\xF4 t\u1EA3",children:(0,t.jsx)(P.Z.TextArea,{})}),(0,t.jsx)(R.ZP.Item,{name:"content",label:"N\u1ED9i dung",rules:[{required:!0}],children:(0,t.jsx)(a(),{language:"en",style:{border:"1px solid #d1d1d1"}})}),(0,t.jsx)("div",{className:"mb-2",children:"\u1EA2nh \u0111\u1EA1i di\u1EC7n"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)(R.ZP.Item,{name:"thumbnail",children:(0,t.jsx)(P.Z,{})})}),(0,t.jsx)(n.Z,{type:"primary",icon:(0,t.jsx)(ye.Z,{}),onClick:function(){return g(!0)},children:"Explorer"}),(0,t.jsx)(B.Z,{content:re,children:(0,t.jsx)(n.Z,{icon:(0,t.jsx)(Pe.Z,{}),children:"Preview"})})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)(R.ZP.Item,{name:"categories",label:"Danh m\u1EE5c",children:(0,t.jsx)(r.Z,{fieldProps:{mode:"multiple"},options:k})})}),(0,t.jsx)(R.ZP.Item,{name:"status",label:"Tr\u1EA1ng th\xE1i",initialValue:1,children:(0,t.jsx)(r.Z,{allowClear:!1,options:[{value:0,label:"Draft"},{value:1,label:"Active"}]})})]}),(0,t.jsx)("div",{className:"mb-2",children:"Tags"}),(0,t.jsx)(Ee,{tags:W,setTags:V}),(0,t.jsx)(Ze.Z,{visible:v,onVisibleChange:g,onSelect:ce})]})},De=Ce,_e=e(30381),Te=e.n(_e),je=e(61685),xe=function(){var x=(0,i.useState)(!1),C=(0,f.Z)(x,2),G=C[0],K=C[1],k=(0,i.useState)(0),U=(0,f.Z)(k,2),q=U[0],z=U[1],H=(0,i.useRef)(),L=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(g){setTimeout(function(){g(!0)},v)})},Y=function(){var v;(v=H.current)===null||v===void 0||v.reload()},ee=function(v){z(v),L(),K(!0)},W=function(){z(0),L(2e3),K(!0)},V=function(v){(0,Z.fR)(v).then(function(g){g.succeeded?(S.default.success("deleted!"),Y()):S.default.error("error!")})},te=[{title:"Ti\xEAu \u0111\u1EC1",dataIndex:"title",render:function(v,g){return(0,t.jsx)("a",{href:"".concat(je.y,"/post/").concat(g.url,"-").concat(g.id,".html"),target:"_blank",children:v})}},{title:"L\u01B0\u1EE3t xem",dataIndex:"view",search:!1,render:function(v,g){return g.view.toLocaleString()}},{title:"Ng\xE0y c\u1EADp nh\u1EADt",dataIndex:"modifiedDate",search:!1,render:function(v,g){return Te()(g.modifiedDate).format("DD/MM/YYYY hh:mm:ss")}},{title:(0,t.jsx)(A._H,{id:"global.status",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"Draft",status:"Default"},1:{text:"Active",status:"Processing"},2:{text:(0,t.jsx)(A._H,{id:"pages.searchTable.nameStatus.online",defaultMessage:"Online"}),status:"Success"},3:{text:(0,t.jsx)(A._H,{id:"pages.searchTable.nameStatus.abnormal",defaultMessage:"Abnormal"}),status:"Error"}}},{title:(0,t.jsx)(A._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(v,g){return[(0,t.jsx)(n.Z,{type:"primary",icon:(0,t.jsx)(se.Z,{}),onClick:function(){return ee(g.id)}}),(0,t.jsx)(c.Z,{title:"Are you sure to delete this?",onConfirm:function(){return V(g.id)},okText:"Yes",cancelText:"No",children:(0,t.jsx)(n.Z,{type:"primary",danger:!0,icon:(0,t.jsx)(b.Z,{})})})]}}];return(0,t.jsxs)(M.ZP,{title:"B\xE0i vi\u1EBFt",children:[(0,t.jsx)($.ZP,{headerTitle:"Danh s\xE1ch",rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsx)(n.Z,{type:"primary",danger:!0,children:"Import"}),(0,t.jsx)(n.Z,{type:"primary",icon:(0,t.jsx)(F.Z,{}),onClick:W,children:"Vi\u1EBFt b\xE0i"})]},request:Z.Jq,columns:te,rowSelection:{},actionRef:H}),(0,t.jsx)(De,{visible:G,setVisible:K,postId:q,reload:Y})]})},Se=xe},92374:function(oe,w,e){"use strict";e.d(w,{P8:function(){return S},ad:function(){return F},oU:function(){return $},o1:function(){return A},tM:function(){return O},b1:function(){return J},_I:function(){return m},Pq:function(){return X},kK:function(){return R}});var Q=e(11849),c=e(3182),ae=e(94043),n=e.n(ae),h=e(61685);function S(){return f.apply(this,arguments)}function f(){return f=(0,c.Z)(n().mark(function r(){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,h.Z)("/file/backup",{responseType:"blob"}));case 1:case"end":return a.stop()}},r)})),f.apply(this,arguments)}function se(r){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime.mark(function r(o){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/post/list-in-user/".concat(o)));case 1:case"end":return l.stop()}},r)})),b.apply(this,arguments)}function F(r){return M.apply(this,arguments)}function M(){return M=(0,c.Z)(n().mark(function r(o){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.Z)("/file/list",{method:"GET",params:(0,Q.Z)({},o)}));case 1:case"end":return l.stop()}},r)})),M.apply(this,arguments)}function $(r){return i.apply(this,arguments)}function i(){return i=(0,c.Z)(n().mark(function r(o){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.Z)("/appsetting/details/".concat(o)));case 1:case"end":return l.stop()}},r)})),i.apply(this,arguments)}function A(r){return Z.apply(this,arguments)}function Z(){return Z=(0,c.Z)(n().mark(function r(o){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.Z)("/appsetting/save",{data:o,method:"POST"}));case 1:case"end":return l.stop()}},r)})),Z.apply(this,arguments)}function O(){return B.apply(this,arguments)}function B(){return B=(0,c.Z)(n().mark(function r(){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,h.Z)("/user"));case 1:case"end":return a.stop()}},r)})),B.apply(this,arguments)}function J(){return P.apply(this,arguments)}function P(){return P=(0,c.Z)(n().mark(function r(){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.Z)("/file/total-used");case 2:return a.t0=a.sent,a.abrupt("return",{data:a.t0});case 4:case"end":return a.stop()}},r)})),P.apply(this,arguments)}function s(r){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime.mark(function r(o){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/file/upload",{method:"POST",data:o}));case 1:case"end":return l.stop()}},r)})),E.apply(this,arguments)}function m(r){return u.apply(this,arguments)}function u(){return u=(0,c.Z)(n().mark(function r(o){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.Z)("/file/delete/".concat(o),{method:"POST"}));case 1:case"end":return l.stop()}},r)})),u.apply(this,arguments)}function X(r,o){return N.apply(this,arguments)}function N(){return N=(0,c.Z)(n().mark(function r(o,a){return n().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",(0,h.Z)("/post/list-by-category/".concat(o),{params:(0,Q.Z)({},a)}));case 1:case"end":return ue.stop()}},r)})),N.apply(this,arguments)}function R(){return j.apply(this,arguments)}function j(){return j=(0,c.Z)(n().mark(function r(){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,h.Z)("/post/get-list-popular"));case 1:case"end":return a.stop()}},r)})),j.apply(this,arguments)}},51742:function(oe,w,e){"use strict";e.d(w,{KQ:function(){return S},CP:function(){return se},i8:function(){return F},yr:function(){return $},rB:function(){return A},uu:function(){return O},n3:function(){return J}});var Q=e(11849),c=e(3182),ae=e(94043),n=e.n(ae),h=e(61685);function S(){return f.apply(this,arguments)}function f(){return f=(0,c.Z)(n().mark(function s(){return n().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,h.Z)("/category/all",{method:"GET"}));case 1:case"end":return m.stop()}},s)})),f.apply(this,arguments)}function se(s){return b.apply(this,arguments)}function b(){return b=(0,c.Z)(n().mark(function s(E){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.Z)("/category/list",{method:"GET",params:(0,Q.Z)({},E)}));case 1:case"end":return u.stop()}},s)})),b.apply(this,arguments)}function F(s){return M.apply(this,arguments)}function M(){return M=(0,c.Z)(n().mark(function s(E){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.Z)("/category/add",{method:"POST",data:E}));case 1:case"end":return u.stop()}},s)})),M.apply(this,arguments)}function $(s){return i.apply(this,arguments)}function i(){return i=(0,c.Z)(n().mark(function s(E){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.Z)("/category/update",{method:"POST",data:E}));case 1:case"end":return u.stop()}},s)})),i.apply(this,arguments)}function A(){return Z.apply(this,arguments)}function Z(){return Z=(0,c.Z)(n().mark(function s(){return n().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,h.Z)("/category/list-parrent",{method:"GET"}));case 1:case"end":return m.stop()}},s)})),Z.apply(this,arguments)}function O(s){return B.apply(this,arguments)}function B(){return B=(0,c.Z)(n().mark(function s(E){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.Z)("/category/delete/".concat(E),{method:"POST"}));case 1:case"end":return u.stop()}},s)})),B.apply(this,arguments)}function J(s){return P.apply(this,arguments)}function P(){return P=(0,c.Z)(n().mark(function s(E){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.Z)("/category/".concat(E),{method:"GET"}));case 1:case"end":return u.stop()}},s)})),P.apply(this,arguments)}}}]);
