(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[166],{84448:function(Ee,G,t){"use strict";t.r(G),t.d(G,{default:function(){return pe}});var Ce=t(62350),X=t(75443),ye=t(57663),y=t(71577),Te=t(34792),T=t(48086),h=t(2824),w=t(8212),k=t(73171),H=t(49101),q=t(70844),_=t(27019),i=t(67294),z=t(43581),O=t(36571),Pe=t(20136),ee=t(55241),De=t(47673),P=t(4107),te=t(3182),Ve=t(12968),ne=t(62462),ae=t(94043),K=t.n(ae),se=t(5966),p=t(952),le=t(71975),W=t(64317),re=t(85589),Q=t.n(re),ie=t(51742),Ae=t(22385),oe=t(69713),Ne=t(71153),U=t(60331),$=t(86582),e=t(85893),ue=function(c){var o=c.tags,I=c.setTags,g=(0,i.useState)(""),D=(0,h.Z)(g,2),m=D[0],V=D[1],S=(0,i.useState)(!1),E=(0,h.Z)(S,2),x=E[0],C=E[1],A=(0,i.useState)(""),j=(0,h.Z)(A,2),Z=j[0],N=j[1],u=(0,i.useState)(-1),s=(0,h.Z)(u,2),l=s[0],F=s[1],R=(0,i.useRef)(),M=function(n){var B=o.filter(function(b){return b!==n});I(B)},Y=function(){var n;C(!0),(n=R.current)===null||n===void 0||n.focus()},f=function(n){V(n.target.value)},d=function(){var n=o;m&&o.indexOf(m)===-1&&(n=[].concat((0,$.Z)(o),[m])),V(""),C(!1),I(n)},r=function(n){N(n.target.value)},v=function(){var n=(0,$.Z)(o);I(n),n[l]=Z,F(-1),N("")};return(0,e.jsxs)(e.Fragment,{children:[o.map(function(a,n){if(l===n)return(0,e.jsx)(P.Z,{ref:R,size:"small",className:"tag-input",value:Z,onChange:r,onBlur:v,onPressEnter:v},a);var B=a.length>20,b=(0,e.jsx)(U.Z,{closable:n!==0,onClose:function(){return M(a)},children:(0,e.jsx)("span",{onDoubleClick:function(Se){if(n!==0){var L;(L=R.current)===null||L===void 0||L.focus(),Se.preventDefault()}},children:B?"".concat(a.slice(0,20),"..."):a})},a);return B?(0,e.jsx)(oe.Z,{title:a,children:b},a):b}),x&&(0,e.jsx)(P.Z,{ref:R,type:"text",className:"w-20",size:"small",value:m,onChange:f,onBlur:d,onPressEnter:d}),!x&&(0,e.jsxs)(U.Z,{className:"site-tag-plus",onClick:Y,children:[(0,e.jsx)(H.Z,{})," New Tag"]})]})},de=ue,ve=t(63258),ce=t(95357),fe=t(26667),he=function(c){var o=(0,i.useRef)(),I=(0,i.useState)(),g=(0,h.Z)(I,2),D=g[0],m=g[1],V=(0,i.useState)(""),S=(0,h.Z)(V,2),E=S[0],x=S[1],C=(0,i.useState)([]),A=(0,h.Z)(C,2),j=A[0],Z=A[1],N=(0,i.useState)(!1),u=(0,h.Z)(N,2),s=u[0],l=u[1];(0,i.useEffect)(function(){(0,ie.KQ)().then(function(f){m(f.map(function(d){return{value:d.id,label:d.name}}))})},[]),(0,i.useEffect)(function(){if(c.postId!==0)(0,O.xl)(c.postId).then(function(d){var r,v=d.post,a=d.categories;x(v.thumbnail),v.tags&&Z(v.tags.split(",")),(r=o.current)===null||r===void 0||r.setFields([{name:"id",value:v.id},{name:"title",value:v.title},{name:"url",value:v.url},{name:"description",value:v.description},{name:"thumbnail",value:v.thumbnail},{name:"content",value:Q().createEditorState(v.content)},{name:"categories",value:a},{name:"status",value:v.status}])});else{var f;(f=o.current)===null||f===void 0||f.resetFields(),Z([]),x("")}},[c.postId]);var F=function(){c.setVisible(!1),c.reload()},R=(0,e.jsx)(ne.Z,{src:E,width:200,height:150}),M=function(){var f=(0,te.Z)(K().mark(function d(r){return K().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r.content=r.content.toHTML(),j?r.tags=j.join(","):r.tags="",c.postId!==0?(0,O.CP)(r).then(function(n){n.succeeded?(T.default.success("succeeded!"),F()):T.default.error("faild!")}):(0,O.q2)(r).then(function(n){n.succeeded?(T.default.success("succeeded!"),F()):T.default.error("faild!")});case 3:case"end":return a.stop()}},d)}));return function(r){return f.apply(this,arguments)}}(),Y=function(d){var r;x(d),(r=o.current)===null||r===void 0||r.setFieldsValue({thumbnail:d})};return(0,e.jsxs)(le.Z,{width:window.innerWidth-window.innerWidth/4,visible:c.visible,onFinish:M,onVisibleChange:c.setVisible,formRef:o,children:[(0,e.jsx)(p.ZP.Item,{name:"id",hidden:!0,children:(0,e.jsx)(P.Z,{})}),(0,e.jsx)(se.Z,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0}]}),(0,e.jsx)(p.ZP.Item,{name:"url",label:"\u0110\u01B0\u1EDDng d\u1EABn",rules:[{required:!0}],children:(0,e.jsx)(P.Z,{})}),(0,e.jsx)(p.ZP.Item,{name:"description",label:"M\xF4 t\u1EA3",children:(0,e.jsx)(P.Z.TextArea,{})}),(0,e.jsx)(p.ZP.Item,{name:"content",label:"N\u1ED9i dung",rules:[{required:!0}],children:(0,e.jsx)(Q(),{language:"en",style:{border:"1px solid #d1d1d1"}})}),(0,e.jsx)("div",{className:"mb-2",children:"\u1EA2nh \u0111\u1EA1i di\u1EC7n"}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(p.ZP.Item,{name:"thumbnail",children:(0,e.jsx)(P.Z,{})})}),(0,e.jsx)(y.Z,{type:"primary",icon:(0,e.jsx)(ve.Z,{}),onClick:function(){return l(!0)},children:"Explorer"}),(0,e.jsx)(ee.Z,{content:R,children:(0,e.jsx)(y.Z,{icon:(0,e.jsx)(ce.Z,{}),children:"Preview"})})]}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("div",{className:"flex-grow",children:(0,e.jsx)(p.ZP.Item,{name:"categories",label:"Danh m\u1EE5c",children:(0,e.jsx)(W.Z,{fieldProps:{mode:"multiple"},options:D})})}),(0,e.jsx)(p.ZP.Item,{name:"status",label:"Tr\u1EA1ng th\xE1i",initialValue:1,children:(0,e.jsx)(W.Z,{allowClear:!1,options:[{value:0,label:"Draft"},{value:1,label:"Active"}]})})]}),(0,e.jsx)("div",{className:"mb-2",children:"Tags"}),(0,e.jsx)(de,{tags:j,setTags:Z}),(0,e.jsx)(fe.Z,{visible:s,onVisibleChange:l,onSelect:Y})]})},me=he,xe=t(30381),ge=t.n(xe),je=t(61685),Ze=function(){var c=(0,i.useState)(!1),o=(0,h.Z)(c,2),I=o[0],g=o[1],D=(0,i.useState)(0),m=(0,h.Z)(D,2),V=m[0],S=m[1],E=(0,i.useRef)(),x=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(l){setTimeout(function(){l(!0)},s)})},C=function(){var s;(s=E.current)===null||s===void 0||s.reload()},A=function(s){S(s),x(),g(!0)},j=function(){S(0),x(2e3),g(!0)},Z=function(s){(0,O.fR)(s).then(function(l){l.succeeded?(T.default.success("deleted!"),C()):T.default.error("error!")})},N=[{title:"Ti\xEAu \u0111\u1EC1",dataIndex:"title",render:function(s,l){return(0,e.jsx)("a",{href:"".concat(je.y,"/post/").concat(l.url,"-").concat(l.id,".html"),target:"_blank",children:s})}},{title:"L\u01B0\u1EE3t xem",dataIndex:"view",search:!1,render:function(s,l){return l.view.toLocaleString()}},{title:"Ng\xE0y c\u1EADp nh\u1EADt",dataIndex:"modifiedDate",search:!1,render:function(s,l){return ge()(l.modifiedDate).format("DD/MM/YYYY hh:mm:ss")}},{title:(0,e.jsx)(z._H,{id:"global.status",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"Draft",status:"Default"},1:{text:"Active",status:"Processing"}}},{title:(0,e.jsx)(z._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(s,l){return[(0,e.jsx)(y.Z,{type:"primary",icon:(0,e.jsx)(w.Z,{}),onClick:function(){return A(l.id)}},0),(0,e.jsx)(X.Z,{title:"Are you sure to delete this?",onConfirm:function(){return Z(l.id)},okText:"Yes",cancelText:"No",children:(0,e.jsx)(y.Z,{type:"primary",danger:!0,icon:(0,e.jsx)(k.Z,{})})},1)]}}];return(0,e.jsxs)(q.ZP,{children:[(0,e.jsx)(_.ZP,{headerTitle:"Danh s\xE1ch",rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,e.jsx)(y.Z,{type:"primary",danger:!0,children:"Import"},0),(0,e.jsx)(y.Z,{type:"primary",icon:(0,e.jsx)(H.Z,{}),onClick:j,children:"Vi\u1EBFt b\xE0i"},1)]},request:O.AB,columns:N,rowSelection:{},actionRef:E}),(0,e.jsx)(me,{visible:I,setVisible:g,postId:V,reload:C})]})},pe=Ze}}]);
